<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tr·∫Øc nghi·ªám H∆∞·ªõng nghi·ªáp RIASEC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .bar-chart {
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            height: 400px;
            padding: 20px;
            gap: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            position: relative;
        }
        .bar-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            height: 100%;
            justify-content: flex-end;
        }
        .bar {
            width: 100%;
            background: linear-gradient(180deg, var(--bar-color) 0%, var(--bar-color-dark) 100%);
            border-radius: 8px 8px 0 0;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 18px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        .bar:hover {
            opacity: 0.8;
            transform: translateY(-5px);
        }
        .likert-option {
            transition: all 0.2s ease;
        }
        .likert-option:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script>
        const SHEETDB_API_URL = 'https://sheetdb.io/api/v1/l3w3hhxab5liu';

        const state = {
            page: 'intro',
            answers: {},
            results: null,
            loading: false,
            careerGoals: {
                // I. Th√¥ng tin c√° nh√¢n
                name: '', 
                class: '', 
                school: '',
                testDate: '',
                
                // II. K·∫øt qu·∫£ kh√°m ph√°
                riasecTop: [],
                personality: [],
                favoriteSubjects: '',
                activities: '',
                
                // III. Ngh·ªÅ nghi·ªáp quan t√¢m
                careerInterest: '',
                whyChoose: [],
                whyChooseOther: '',
                strengths: '',
                improvements: '',
                
                // IV. K·∫ø ho·∫°ch t∆∞∆°ng lai
                actionDate: '',
                proudMoment: '',
                
                // Email ph·ª• huynh
                parentEmail: ''
            }
        };

        const questions = [
            { id: 1, text: "T√¥i th√≠ch l√†m vi·ªác v·ªõi m√°y m√≥c, d·ª•ng c·ª•, s·ª≠a ch·ªØa ƒë·ªì v·∫≠t.", category: "R" },
            { id: 2, text: "T√¥i th√≠ch tham gia c√°c ho·∫°t ƒë·ªông ngo√†i tr·ªùi, th·ªÉ thao, k·ªπ thu·∫≠t th·ª±c h√†nh.", category: "R" },
            { id: 3, text: "T√¥i vui khi l·∫Øp r√°p ƒë·ªì ch∆°i, m√¥ h√¨nh, ho·∫∑c s·ª≠a ƒë·ªì trong nh√†.", category: "R" },
            { id: 4, text: "T√¥i h·ª©ng th√∫ v·ªõi ngh·ªÅ nghi·ªáp c·∫ßn k·ªπ nƒÉng th·ª±c h√†nh (th·ª£, k·ªπ s∆∞).", category: "R" },
            { id: 5, text: "T√¥i th√≠ch kh√°m ph√° c√¥ng c·ª• k·ªπ thu·∫≠t m·ªõi (ƒëi·ªán, m√°y, robot).", category: "R" },
            
            { id: 6, text: "T√¥i th√≠ch t√¨m hi·ªÉu nguy√™n nh√¢n c·ªßa c√°c hi·ªán t∆∞·ª£ng t·ª± nhi√™n.", category: "I" },
            { id: 7, text: "T√¥i th√≠ch ƒë·ªçc s√°ch khoa h·ªçc, l√†m th√≠ nghi·ªám nh·ªè ƒë·ªÉ kh√°m ph√°.", category: "I" },
            { id: 8, text: "T√¥i th√≠ch suy nghƒ©, ph√¢n t√≠ch, t√¨m l·ªùi gi·∫£i cho v·∫•n ƒë·ªÅ.", category: "I" },
            { id: 9, text: "T√¥i th√≠ch nghi√™n c·ª©u, ƒë·∫∑t c√¢u h·ªèi 't·∫°i sao' v√† t√¨m b·∫±ng ch·ª©ng.", category: "I" },
            { id: 10, text: "T√¥i t√≤ m√≤ v·ªÅ c√°ch m·ªçi th·ª© ho·∫°t ƒë·ªông v√† mu·ªën t√¨m hi·ªÉu s√¢u h∆°n.", category: "I" },
            
            { id: 11, text: "T√¥i th√≠ch v·∫Ω, l√†m ƒë·ªì th·ªß c√¥ng, thi·∫øt k·∫ø s√°ng t·∫°o.", category: "A" },
            { id: 12, text: "T√¥i c·∫£m th·∫•y vui khi t·∫°o ra b·ª©c tranh, b√†i h√°t ho·∫∑c c√¢u chuy·ªán.", category: "A" },
            { id: 13, text: "T√¥i mu·ªën l√†m nh·ªØng vi·ªác li√™n quan ƒë·∫øn ngh·ªá thu·∫≠t, s√¢n kh·∫•u.", category: "A" },
            { id: 14, text: "T√¥i th√≠ch thi·∫øt k·∫ø trang tr√≠, ph·ªëi m√†u, s√°ng t·∫°o h√¨nh ·∫£nh.", category: "A" },
            { id: 15, text: "T√¥i mu·ªën th·ª≠ l√†m s·∫£n ph·∫©m th·ªß c√¥ng ƒë·ªÉ tr∆∞ng b√†y.", category: "A" },
            
            { id: 16, text: "T√¥i th√≠ch h∆∞·ªõng d·∫´n v√† gi√∫p ƒë·ª° b·∫°n b√® khi h·ªç h·ªçc.", category: "S" },
            { id: 17, text: "T√¥i th√≠ch l√†m vi·ªác nh√≥m ƒë·ªÉ chƒÉm s√≥c, h·ªó tr·ª£ ng∆∞·ªùi kh√°c.", category: "S" },
            { id: 18, text: "T√¥i s·∫µn s√†ng l·∫Øng nghe v√† t∆∞ v·∫•n khi ng∆∞·ªùi kh√°c g·∫∑p kh√≥ khƒÉn.", category: "S" },
            { id: 19, text: "T√¥i th√≠ch tham gia ho·∫°t ƒë·ªông c·ªông ƒë·ªìng, gi√∫p tr·∫ª nh·ªè ho·∫∑c ng∆∞·ªùi gi√†.", category: "S" },
            { id: 20, text: "T√¥i th√≠ch trao ƒë·ªïi, l·∫Øng nghe v√† gi·∫£i b√†i to√°n cu·ªôc s·ªëng c·ªßa ng∆∞·ªùi kh√°c.", category: "S" },
            
            { id: 21, text: "T√¥i th√≠ch thuy·∫øt tr√¨nh, thuy·∫øt ph·ª•c ho·∫∑c t·ªï ch·ª©c s·ª± ki·ªán nh·ªè.", category: "E" },
            { id: 22, text: "T√¥i mu·ªën qu·∫£n l√Ω m·ªôt d·ª± √°n nh·ªè ho·∫∑c b√°n h√†ng khi c√≥ d·ªãp.", category: "E" },
            { id: 23, text: "T√¥i hay c√≥ √Ω t∆∞·ªüng b·∫Øt ƒë·∫ßu m·ªôt ho·∫°t ƒë·ªông ho·∫∑c d·ª± √°n nh·ªè.", category: "E" },
            { id: 24, text: "T√¥i t·ª± tin khi ph·∫£i thuy·∫øt ph·ª•c m·ªçi ng∆∞·ªùi l√†m theo √Ω m√¨nh.", category: "E" },
            { id: 25, text: "T√¥i c√≥ mong mu·ªën th·ª≠ l·∫≠p m·ªôt gian h√†ng ho·∫∑c b√°n s·∫£n ph·∫©m nh·ªè.", category: "E" },
            
            { id: 26, text: "T√¥i th√≠ch l√†m vi·ªác theo quy t·∫Øc, s·∫Øp x·∫øp gi·∫•y t·ªù ho·∫∑c l·∫≠p danh s√°ch.", category: "C" },
            { id: 27, text: "T√¥i c·∫£m th·∫•y an t√¢m khi c√¥ng vi·ªác r√µ r√†ng, c√≥ quy tr√¨nh.", category: "C" },
            { id: 28, text: "T√¥i th√≠ch l√†m c√¥ng vi·ªác c·∫ßn ƒë·ªô ch√≠nh x√°c v√† theo h∆∞·ªõng d·∫´n chi ti·∫øt.", category: "C" },
            { id: 29, text: "T√¥i th√≠ch c√¥ng vi·ªác h√†nh ch√≠nh, s·ªï s√°ch, l∆∞u tr·ªØ t√†i li·ªáu.", category: "C" },
            { id: 30, text: "T√¥i th√≠ch l√†m vi·ªác c√≥ tr√¨nh t·ª±, th·ª±c hi·ªán theo danh s√°ch c√¥ng vi·ªác.", category: "C" }
        ];

        const likertScale = [
            { value: 1, label: "R·∫•t kh√¥ng th√≠ch", color: "from-red-500 to-red-600" },
            { value: 2, label: "Kh√¥ng th√≠ch", color: "from-orange-500 to-orange-600" },
            { value: 3, label: "B√¨nh th∆∞·ªùng", color: "from-gray-500 to-gray-600" },
            { value: 4, label: "Th√≠ch", color: "from-blue-500 to-blue-600" },
            { value: 5, label: "R·∫•t th√≠ch", color: "from-green-500 to-green-600" }
        ];

        const categoryInfo = {
            R: { 
                name: "Realistic - Th·ª±c t·∫ø", 
                shortName: "Th·ª±c t·∫ø", 
                color: "#3B82F6", 
                colorDark: "#2563EB", 
                icon: "üîµ", 
                description: "B·∫°n c√≥ xu h∆∞·ªõng th√≠ch l√†m vi·ªác v·ªõi m√°y m√≥c, c√¥ng c·ª•, thi·∫øt b·ªã, c√¥ng ngh·ªá, ho·∫°t ƒë·ªông ngo√†i tr·ªùi ho·∫∑c quy tr√¨nh th·ª±c h√†nh r√µ r√†ng. B·∫°n h·ªçc t·ªët h∆°n khi ƒë∆∞·ª£c tr·∫£i nghi·ªám v√† thao t√°c tr·ª±c ti·∫øp.",
                advice: [
                    "H√£y ∆∞u ti√™n nh·ªØng ho·∫°t ƒë·ªông tr·∫£i nghi·ªám th·ª±c t·∫ø: l√†m th√≠ nghi·ªám, ch·∫ø t·∫°o, m√¥ h√¨nh STEM, robot, c∆° kh√≠, th·ªÉ thao, n√¥ng nghi·ªáp c√¥ng ngh·ªá cao.",
                    "T·∫≠p r√®n luy·ªán s·ª± ki√™n tr√¨, k·ªπ nƒÉng s·ª≠ d·ª•ng c√¥ng c·ª•, ƒë·ªô ch√≠nh x√°c v√† kh·∫£ nƒÉng l√†m vi·ªác ƒë·ªôc l·∫≠p.",
                    "Ch·ªß ƒë·ªông tham gia c√°c c√¢u l·∫°c b·ªô STEM, robotics, s·ª≠a ch·ªØa -- DIY, tr·∫£i nghi·ªám th·ª±c t·∫ø ngo√†i tr·ªùi."
                ],
                careers: "K·ªπ thu·∫≠t -- c√¥ng ngh·ªá, c∆° kh√≠ -- √¥ t√¥, k·ªπ thu·∫≠t ƒëi·ªán -- ƒëi·ªán t·ª≠, c√¥ng ngh·ªá n√¥ng nghi·ªáp, logistic -- v·∫≠n h√†nh, c·∫£nh s√°t -- qu√¢n ƒë·ªôi, hu·∫•n luy·ªán th·ªÉ thao, h∆∞·ªõng d·∫´n du l·ªãch tr·∫£i nghi·ªám."
            },
            I: { 
                name: "Investigative - Nghi√™n c·ª©u", 
                shortName: "Nghi√™n c·ª©u", 
                color: "#8B5CF6", 
                colorDark: "#7C3AED", 
                icon: "üü£", 
                description: "B·∫°n m·∫°nh v·ªÅ ph√¢n t√≠ch, kh√°m ph√°, ƒë·∫∑t c√¢u h·ªèi, suy lu·∫≠n, t√¨m hi·ªÉu nguy√™n nh√¢n -- k·∫øt qu·∫£. B·∫°n h·ªçc t·ªët th√¥ng qua t∆∞ duy logic v√† nghi√™n c·ª©u khoa h·ªçc.",
                advice: [
                    "T·∫≠p trung ph√°t tri·ªÉn k·ªπ nƒÉng ƒë·ªçc hi·ªÉu, nghi√™n c·ª©u, ghi ch√©p v√† tr√¨nh b√†y k·∫øt qu·∫£ khoa h·ªçc.",
                    "Tham gia c√°c cu·ªôc thi khoa h·ªçc, nghi√™n c·ª©u nh·ªè, STEM, d·ª± √°n AI -- d·ªØ li·ªáu d√†nh cho h·ªçc sinh.",
                    "Lu√¥n duy tr√¨ th√≥i quen ho√†i nghi t√≠ch c·ª±c: 'T·∫°i sao l·∫°i nh∆∞ v·∫≠y?' -- 'N·∫øu thay ƒë·ªïi ƒëi·ªÅu n√†y th√¨ k·∫øt qu·∫£ ra sao?'"
                ],
                careers: "B√°c sƒ© -- y khoa, d∆∞·ª£c -- sinh h·ªçc, khoa h·ªçc t·ª± nhi√™n, ph√¢n t√≠ch d·ªØ li·ªáu -- tr√≠ tu·ªá nh√¢n t·∫°o, c√¥ng ngh·ªá th√¥ng tin, ki·ªÉm ƒë·ªãnh ch·∫•t l∆∞·ª£ng, nghi√™n c·ª©u khoa h·ªçc, t√¢m l√Ω h·ªçc."
            },
            A: { 
                name: "Artistic - Ngh·ªá thu·∫≠t", 
                shortName: "Ngh·ªá thu·∫≠t", 
                color: "#EC4899", 
                colorDark: "#DB2777", 
                icon: "üî¥", 
                description: "B·∫°n c√≥ kh·∫£ nƒÉng th·∫©m m·ªπ, s√°ng t·∫°o, c·∫£m x√∫c ngh·ªá thu·∫≠t, linh ho·∫°t trong c√°ch bi·ªÉu ƒë·∫°t √Ω t∆∞·ªüng, kh√¥ng th√≠ch s·ª± g√≤ b√≥ c·ª©ng nh·∫Øc.",
                advice: [
                    "T·∫°o kh√¥ng gian ƒë·ªÉ s√°ng t·∫°o: vi·∫øt, v·∫Ω, di·ªÖn xu·∫•t, h√°t, thi·∫øt k·∫ø poster, video clip, animation, UI/UX.",
                    "R√®n t√≠nh ki√™n tr√¨ v√† k·ªπ nƒÉng qu·∫£n l√Ω th·ªùi gian --- v√¨ c·∫£m h·ª©ng r·∫•t quan tr·ªçng nh∆∞ng ho√†n th√†nh s·∫£n ph·∫©m m·ªõi l√† ch√¨a kh√≥a.",
                    "Tham gia th·ª≠ th√°ch: l√†m blogger h·ªçc ƒë∆∞·ªùng, thi·∫øt k·∫ø, v·∫Ω minh ho·∫°, l√†m k√™nh tiktok ki·∫øn th·ª©c."
                ],
                careers: "Thi·∫øt k·∫ø ƒë·ªì h·ªça -- UI/UX, ki·∫øn tr√∫c -- m·ªπ thu·∫≠t, truy·ªÅn th√¥ng -- b√°o ch√≠, nhi·∫øp ·∫£nh -- d·ª±ng phim, √¢m nh·∫°c -- s√¢n kh·∫•u, marketing s√°ng t·∫°o, th·ªùi trang, s√°ng t·∫°o n·ªôi dung."
            },
            S: { 
                name: "Social - X√£ h·ªôi", 
                shortName: "X√£ h·ªôi", 
                color: "#10B981", 
                colorDark: "#059669", 
                icon: "üü¢", 
                description: "B·∫°n th√≠ch gi√∫p ƒë·ª° ng∆∞·ªùi kh√°c, giao ti·∫øp, l·∫Øng nghe, chia s·∫ª, l√†m vi·ªác nh√≥m, c√≥ s·ª± ƒë·ªìng c·∫£m cao.",
                advice: [
                    "T·∫≠p luy·ªán k·ªπ nƒÉng giao ti·∫øp, l·∫Øng nghe t√≠ch c·ª±c, qu·∫£n l√Ω c·∫£m x√∫c v√† gi·∫£i quy·∫øt xung ƒë·ªôt.",
                    "Tham gia t√¨nh nguy·ªán, t∆∞ v·∫•n b·∫°n b√®, d·∫´n ch∆∞∆°ng tr√¨nh trong c√°c s·ª± ki·ªán, l√†m 'buddy support' cho l·ªõp.",
                    "Quan s√°t th√™m ƒë·∫∑c ƒëi·ªÉm t√≠nh c√°ch ƒë·ªÉ x√°c ƒë·ªãnh phong c√°ch ngh·ªÅ nghi·ªáp ph√π h·ª£p: h∆∞·ªõng d·∫´n -- ƒë√†o t·∫°o / ph·ª•c v·ª• c·ªông ƒë·ªìng / t√¢m l√Ω."
                ],
                careers: "Gi√°o vi√™n -- mentor -- trainer, y t√° -- ƒëi·ªÅu d∆∞·ª°ng -- chƒÉm s√≥c s·ª©c kh·ªèe, t√¢m l√Ω -- c√¥ng t√°c x√£ h·ªôi, du l·ªãch -- h∆∞·ªõng d·∫´n vi√™n, nh√¢n s·ª± -- ƒë√†o t·∫°o, truy·ªÅn th√¥ng c·ªông ƒë·ªìng."
            },
            E: { 
                name: "Enterprising - L√£nh ƒë·∫°o", 
                shortName: "L√£nh ƒë·∫°o", 
                color: "#F59E0B", 
                colorDark: "#D97706", 
                icon: "üü†", 
                description: "B·∫°n t·ª± tin, th√≠ch thuy·∫øt ph·ª•c, ƒë·ªãnh h∆∞·ªõng m·ª•c ti√™u, kh√°m ph√° c∆° h·ªôi, d·∫´n d·∫Øt nh√≥m v√† t·∫°o ·∫£nh h∆∞·ªüng t·ªõi ng∆∞·ªùi kh√°c.",
                advice: [
                    "R√®n k·ªπ nƒÉng thuy·∫øt tr√¨nh, ra quy·∫øt ƒë·ªãnh, qu·∫£n l√Ω d·ª± √°n, qu·∫£n l√Ω th·ªùi gian v√† l·∫≠p k·∫ø ho·∫°ch.",
                    "Tr·∫£i nghi·ªám s·ªõm: b√°n h√†ng th·ª≠ nghi·ªám, t·ªï ch·ª©c ho·∫°t ƒë·ªông, l√†m d·ª± √°n startup mini, l√†m tr∆∞·ªüng nh√≥m.",
                    "Lu√¥n k·∫øt h·ª£p t∆∞ duy th·ª±c t·∫ø + ƒë·∫°o ƒë·ª©c ngh·ªÅ nghi·ªáp ƒë·ªÉ ph√°t tri·ªÉn b·ªÅn v·ªØng."
                ],
                careers: "Qu·∫£n tr·ªã kinh doanh, marketing -- PR, t√†i ch√≠nh -- ng√¢n h√†ng, lu·∫≠t -- ngo·∫°i giao, ch√≠nh tr·ªã -- qu·∫£n l√Ω nh√† n∆∞·ªõc, kinh doanh -- kh·ªüi nghi·ªáp, b·∫•t ƒë·ªông s·∫£n."
            },
            C: { 
                name: "Conventional - Quy t·∫Øc", 
                shortName: "Quy t·∫Øc", 
                color: "#6366F1", 
                colorDark: "#4F46E5", 
                icon: "üü°", 
                description: "B·∫°n l√†m vi·ªác t·ªët v·ªõi d·ªØ li·ªáu, con s·ªë, s·∫Øp x·∫øp, quy tr√¨nh, t√†i li·ªáu, l·∫≠p k·∫ø ho·∫°ch, th√≠ch c√¥ng vi·ªác ·ªïn ƒë·ªãnh v√† ch√≠nh x√°c.",
                advice: [
                    "Ph√°t tri·ªÉn k·ªπ nƒÉng qu·∫£n l√Ω th·ªùi gian, s·∫Øp x·∫øp d·ªØ li·ªáu, tin h·ªçc vƒÉn ph√≤ng v√† ghi ch√©p khoa h·ªçc.",
                    "H√£y th·ª≠ tham gia vi·ªác qu·∫£n l√Ω h·ªì s∆° l·ªõp, th·ªß qu·ªπ, h·ªó tr·ª£ th·ªëng k√™, l√†m b·∫£ng bi·ªÉu, Excel ho·∫∑c Google Sheets.",
                    "R√®n s·ª± ch·ªß ƒë·ªông thay v√¨ ch·ªâ ch·ªù h∆∞·ªõng d·∫´n --- ƒë√≥ l√† ƒëi·ªÉm gi√∫p b·∫°n n·ªïi b·∫≠t trong nh√≥m C."
                ],
                careers: "K·∫ø to√°n -- ki·ªÉm to√°n, th∆∞ k√Ω -- vƒÉn ph√≤ng, qu·∫£n tr·ªã d·ªØ li·ªáu, ph√¢n t√≠ch t√†i ch√≠nh, h√†nh ch√≠nh -- nh√¢n s·ª±, logistics -- xu·∫•t nh·∫≠p kh·∫©u, th∆∞ vi·ªán -- l∆∞u tr·ªØ th√¥ng tin."
            }
        };

        const careerCombinations = {
            'RIE': { title: 'K·ªπ s∆∞, Nh√† nghi√™n c·ª©u ·ª©ng d·ª•ng', desc: 'Ph√π h·ª£p: K·ªπ s∆∞ c∆° kh√≠, K·ªπ s∆∞ ƒëi·ªán, Nh√† ph√°t tri·ªÉn c√¥ng ngh·ªá' },
            'RIC': { title: 'K·ªπ thu·∫≠t vi√™n chuy√™n m√¥n', desc: 'Ph√π h·ª£p: K·ªπ thu·∫≠t vi√™n y t·∫ø, Ki·ªÉm ƒë·ªãnh vi√™n, K·ªπ thu·∫≠t x√¢y d·ª±ng' },
            'RAE': { title: 'Thi·∫øt k·∫ø & Ch·∫ø t√°c', desc: 'Ph√π h·ª£p: Ki·∫øn tr√∫c s∆∞, Nh√† thi·∫øt k·∫ø c√¥ng nghi·ªáp, Th·ª£ th·ªß c√¥ng cao c·∫•p' },
            'IRE': { title: 'Nghi√™n c·ª©u khoa h·ªçc ·ª©ng d·ª•ng', desc: 'Ph√π h·ª£p: Nh√† khoa h·ªçc d·ªØ li·ªáu, L·∫≠p tr√¨nh vi√™n, Nh√† ph√¢n t√≠ch h·ªá th·ªëng' },
            'IAE': { title: 'Nghi√™n c·ª©u & S√°ng t·∫°o', desc: 'Ph√π h·ª£p: Nh√† khoa h·ªçc x√£ h·ªôi, Nh√† nghi√™n c·ª©u th·ªã tr∆∞·ªùng, Designer UX/UI' },
            'IAS': { title: 'Khoa h·ªçc x√£ h·ªôi & Gi√°o d·ª•c', desc: 'Ph√π h·ª£p: Nh√† t√¢m l√Ω h·ªçc, Nh√† nghi√™n c·ª©u gi√°o d·ª•c, Chuy√™n gia ph√°t tri·ªÉn' },
            'ISE': { title: 'Y t·∫ø & T∆∞ v·∫•n', desc: 'Ph√π h·ª£p: B√°c sƒ©, D∆∞·ª£c sƒ©, Chuy√™n vi√™n y t·∫ø c·ªông ƒë·ªìng' },
            'AEI': { title: 'S√°ng t·∫°o n·ªôi dung & Marketing', desc: 'Ph√π h·ª£p: Content creator, Marketing, Nh√† thi·∫øt k·∫ø qu·∫£ng c√°o' },
            'AES': { title: 'Ngh·ªá thu·∫≠t bi·ªÉu di·ªÖn & Gi·∫£ng d·∫°y', desc: 'Ph√π h·ª£p: Ngh·ªá sƒ©, Di·ªÖn vi√™n, Gi√°o vi√™n ngh·ªá thu·∫≠t' },
            'ASE': { title: 'Truy·ªÅn th√¥ng & Quan h·ªá c√¥ng ch√∫ng', desc: 'Ph√π h·ª£p: Nh√† b√°o, MC, Chuy√™n vi√™n PR' },
            'SEI': { title: 'Qu·∫£n l√Ω ngu·ªìn nh√¢n l·ª±c', desc: 'Ph√π h·ª£p: HR Manager, Chuy√™n vi√™n ƒë√†o t·∫°o, T∆∞ v·∫•n ph√°t tri·ªÉn' },
            'SEA': { title: 'Gi√°o d·ª•c & ƒê√†o t·∫°o', desc: 'Ph√π h·ª£p: Gi√°o vi√™n, Gi·∫£ng vi√™n, Chuy√™n vi√™n ƒë√†o t·∫°o doanh nghi·ªáp' },
            'SAI': { title: 'ChƒÉm s√≥c s·ª©c kh·ªèe c·ªông ƒë·ªìng', desc: 'Ph√π h·ª£p: Y t√°, Nh√¢n vi√™n x√£ h·ªôi, T∆∞ v·∫•n t√¢m l√Ω' },
            'EIR': { title: 'Qu·∫£n l√Ω d·ª± √°n c√¥ng ngh·ªá', desc: 'Ph√π h·ª£p: Project Manager IT, Gi√°m ƒë·ªëc c√¥ng ngh·ªá, Business Analyst' },
            'EIS': { title: 'T∆∞ v·∫•n & Ph√°t tri·ªÉn kinh doanh', desc: 'Ph√π h·ª£p: T∆∞ v·∫•n qu·∫£n l√Ω, Business Developer, Sales Manager' },
            'EAS': { title: 'Kinh doanh & Marketing s√°ng t·∫°o', desc: 'Ph√π h·ª£p: Marketing Director, Event Manager, Brand Manager' },
            'ECS': { title: 'Qu·∫£n tr·ªã kinh doanh', desc: 'Ph√π h·ª£p: Qu·∫£n l√Ω doanh nghi·ªáp, CEO, Gi√°m ƒë·ªëc ƒëi·ªÅu h√†nh' },
            'CER': { title: 'Qu·∫£n l√Ω v·∫≠n h√†nh', desc: 'Ph√π h·ª£p: Qu·∫£n l√Ω s·∫£n xu·∫•t, Logistics Manager, Supply Chain' },
            'CEI': { title: 'Qu·∫£n l√Ω t√†i ch√≠nh', desc: 'Ph√π h·ª£p: K·∫ø to√°n tr∆∞·ªüng, Ph√¢n t√≠ch t√†i ch√≠nh, Ki·ªÉm to√°n vi√™n' },
            'CSE': { title: 'H√†nh ch√≠nh & Qu·∫£n l√Ω vƒÉn ph√≤ng', desc: 'Ph√π h·ª£p: Tr·ª£ l√Ω gi√°m ƒë·ªëc, Office Manager, Th∆∞ k√Ω' },
            'CIE': { title: 'Ph√¢n t√≠ch d·ªØ li·ªáu & Th·ªëng k√™', desc: 'Ph√π h·ª£p: Data Analyst, Chuy√™n vi√™n th·ªëng k√™, QA/QC' }
        };

        function handleAnswer(questionId, value) {
            state.answers[questionId] = value;
            render();
        }

        function updateCareerGoal(field, value) {
            state.careerGoals[field] = value;
        }

        function calculateResults() {
            const scores = { R: 0, I: 0, A: 0, S: 0, E: 0, C: 0 };
            const maxScores = { R: 25, I: 25, A: 25, S: 25, E: 25, C: 25 };
            
            questions.forEach(q => { 
                if (state.answers[q.id]) {
                    scores[q.category] += state.answers[q.id];
                }
            });

            const percentageScores = {};
            Object.keys(scores).forEach(key => {
                percentageScores[key] = Math.round((scores[key] / maxScores[key]) * 100);
            });

            const chartData = Object.entries(scores).map(([key, value]) => ({
                category: key,
                name: categoryInfo[key].shortName,
                score: value,
                percentage: percentageScores[key],
                color: categoryInfo[key].color,
                colorDark: categoryInfo[key].colorDark
            }));

            const sortedScores = Object.entries(scores).sort((a, b) => b[1] - a[1]);
            const top3 = sortedScores.slice(0, 3);
            const riasecCode = top3.map(item => item[0]).join('');
            
            const careerMatch = careerCombinations[riasecCode] || careerCombinations[riasecCode.substring(0,2) + sortedScores[3][0]] || null;

            state.results = { 
                scores: scores,
                percentageScores: percentageScores,
                chartData: chartData,
                topCategory: sortedScores[0][0], 
                topScore: sortedScores[0][1],
                top3Categories: top3,
                riasecCode: riasecCode,
                careerMatch: careerMatch,
                sortedScores: sortedScores 
            };
            state.page = 'results';
            render();
        }

        async function saveToGoogleSheets(data, sheetName) {
            if (SHEETDB_API_URL === 'YOUR_SHEETDB_API_URL') {
                console.warn('Ch∆∞a c·∫•u h√¨nh API');
                return false;
            }
            try {
                state.loading = true;
                render();
                const url = SHEETDB_API_URL + '?sheet=' + sheetName;
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ data: [data] })
                });
                if (!response.ok) throw new Error('Failed');
                return true;
            } catch (error) {
                console.error('Error:', error);
                alert('C√≥ l·ªói x·∫£y ra!');
                return false;
            } finally {
                state.loading = false;
                render();
            }
        }

        async function handleGoalSubmit() {
            const timestamp = new Date().toLocaleString('vi-VN');
            
            // Sheet 1: Test Results - K·∫øt qu·∫£ b√†i test
            const testData = {
                Timestamp: timestamp,
                Name: state.careerGoals.name,
                Class: state.careerGoals.class,
                R: state.results.scores.R,
                I: state.results.scores.I,
                A: state.results.scores.A,
                S: state.results.scores.S,
                E: state.results.scores.E,
                C: state.results.scores.C,
                RIASECCode: state.results.riasecCode,
                TopCategory: categoryInfo[state.results.topCategory].name,
                CareerMatch: state.results.careerMatch ? state.results.careerMatch.title : 'Kh√¥ng x√°c ƒë·ªãnh'
            };
            
            // Sheet 2: Career Goals - M·ª•c ti√™u ngh·ªÅ nghi·ªáp
            const goalsData = {
                Timestamp: timestamp,
                Name: state.careerGoals.name,
                Class: state.careerGoals.class,
                School: state.careerGoals.school,
                TestDate: state.careerGoals.testDate,
                RIASECTop: state.careerGoals.riasecTop.join(', '),
                Personality: state.careerGoals.personality.join(', '),
                FavoriteSubjects: state.careerGoals.favoriteSubjects,
                Activities: state.careerGoals.activities,
                CareerInterest: state.careerGoals.careerInterest,
                WhyChoose: state.careerGoals.whyChoose.join(', '),
                WhyChooseOther: state.careerGoals.whyChooseOther || '',
                Strengths: state.careerGoals.strengths,
                Improvements: state.careerGoals.improvements,
                ActionDate: state.careerGoals.actionDate,
                ProudMoment: state.careerGoals.proudMoment,
                ParentEmail: state.careerGoals.parentEmail || ''
            };

            console.log('=== D·ªÆ LI·ªÜU G·ª¨I L√äN GOOGLE SHEETS ===');
            console.log('Test Results:', testData);
            console.log('Career Goals:', goalsData);

            const testSaved = await saveToGoogleSheets(testData, 'Test Results');
            const goalsSaved = await saveToGoogleSheets(goalsData, 'Career Goals');

            if (testSaved && goalsSaved) {
                alert('‚úÖ ƒê√£ l∆∞u th√†nh c√¥ng!\n\nD·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c l∆∞u v√†o Google Sheets.');
                state.page = 'intro';
                state.answers = {};
                state.results = null;
                state.careerGoals = { 
                    name: '', class: '', school: '', testDate: '', 
                    riasecTop: [], personality: [], favoriteSubjects: '', activities: '', 
                    careerInterest: '', whyChoose: [], whyChooseOther: '', 
                    strengths: '', improvements: '', actionDate: '', proudMoment: '', 
                    parentEmail: '' 
                };
                render();
            }
        }

        function isAllAnswered() {
            return questions.every(q => state.answers[q.id] !== undefined);
        }

        function isFormValid() {
            const valid = state.careerGoals.name.trim() !== '' && 
                         state.careerGoals.class.trim() !== '' && 
                         state.careerGoals.school.trim() !== '' &&
                         state.careerGoals.testDate.trim() !== '' &&
                         state.careerGoals.riasecTop.length > 0 &&
                         state.careerGoals.personality.length > 0 &&
                         state.careerGoals.favoriteSubjects.trim() !== '' &&
                         state.careerGoals.activities.trim() !== '' &&
                         state.careerGoals.careerInterest.trim() !== '' &&
                         state.careerGoals.whyChoose.length > 0 &&
                         state.careerGoals.strengths.trim() !== '' &&
                         state.careerGoals.improvements.trim() !== '' &&
                         state.careerGoals.actionDate.trim() !== '' &&
                         state.careerGoals.proudMoment.trim() !== '';
            console.log('Form valid check:', valid, state.careerGoals);
            return valid;
        }

        function render() {
            const root = document.getElementById('root');
            
            if (state.page === 'intro') {
                root.innerHTML = `
                    <div class="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 relative overflow-hidden">
                        <div class="absolute inset-0">
                            <div class="absolute top-20 left-10 w-72 h-72 bg-purple-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse"></div>
                        </div>
                        <div class="relative z-10 min-h-screen flex items-center justify-center p-4">
                            <div class="max-w-4xl w-full">
                                <div class="text-center mb-12">
                                    <h1 class="text-5xl md:text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-400 to-blue-400 mb-4">RIASEC</h1>
                                    <h2 class="text-2xl md:text-3xl font-bold text-white mb-3">Tr·∫Øc nghi·ªám H∆∞·ªõng nghi·ªáp</h2>
                                    <p class="text-xl text-purple-200 mb-6">Kh√°m ph√° con ƒë∆∞·ªùng s·ª± nghi·ªáp c·ªßa b·∫°n</p>
                                    <div class="bg-white/10 backdrop-blur-sm rounded-xl p-4 max-w-2xl mx-auto">
                                        <p class="text-white text-sm">
                                            ‚≠ê ƒê√°nh gi√° m·ª©c ƒë·ªô y√™u th√≠ch c·ªßa b·∫°n v·ªõi m·ªói ho·∫°t ƒë·ªông<br>
                                            üìä H·ªá th·ªëng s·∫Ω ph√¢n t√≠ch v√† ƒë∆∞a ra ƒë·ªãnh h∆∞·ªõng ngh·ªÅ nghi·ªáp ph√π h·ª£p
                                        </p>
                                    </div>
                                </div>
                                <div class="bg-white/10 backdrop-blur-xl rounded-3xl border border-white/20 p-8">
                                    <button onclick="state.page='test'; render();" class="w-full bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500 hover:from-purple-600 hover:via-pink-600 hover:to-blue-600 text-white font-bold py-5 px-8 rounded-2xl text-xl transition-all shadow-2xl">
                                        B·∫Øt ƒë·∫ßu kh√°m ph√° ‚Üí
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            } else if (state.page === 'test') {
                const progress = (Object.keys(state.answers).length / questions.length) * 100;
                const questionsHTML = questions.map(q => {
                    const isAnswered = state.answers[q.id] !== undefined;
                    const cardClass = 'bg-white/10 backdrop-blur-xl rounded-2xl border p-6 transition-all ' + (isAnswered ? 'border-green-400/50 shadow-lg' : 'border-white/20');
                    
                    const optionsHTML = likertScale.map(option => {
                        const isSelected = state.answers[q.id] === option.value;
                        const btnClass = 'likert-option flex-1 py-3 px-2 rounded-xl font-semibold text-xs transition-all ' + 
                            (isSelected ? 'bg-gradient-to-r ' + option.color + ' text-white shadow-lg scale-105' : 'bg-white/10 text-white hover:bg-white/20 border border-white/20');
                        
                        return `
                            <button onclick="handleAnswer(${q.id}, ${option.value})" class="${btnClass}">
                                <div class="text-sm">${option.label}</div>
                            </button>
                        `;
                    }).join('');
                    
                    return `
                        <div class="${cardClass}">
                            <p class="text-white font-medium mb-4">
                                <span class="text-purple-400 font-bold">C√¢u ${q.id}:</span> ${q.text}
                            </p>
                            <div class="mb-3">
                                <div class="flex justify-between text-xs text-purple-200 mb-2">
                                    <span>R·∫•t kh√¥ng th√≠ch</span>
                                    <span>R·∫•t th√≠ch</span>
                                </div>
                                <div class="flex gap-2">
                                    ${optionsHTML}
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');

                root.innerHTML = `
                    <div class="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-4 py-8">
                        <div class="max-w-4xl mx-auto">
                            <div class="bg-white/10 backdrop-blur-xl rounded-3xl border border-white/20 p-6 mb-6 sticky top-4 z-10">
                                <div class="flex items-center justify-between mb-4">
                                    <h2 class="text-2xl font-bold text-white">B√†i tr·∫Øc nghi·ªám</h2>
                                    <div class="text-right">
                                        <div class="text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400">
                                            ${Object.keys(state.answers).length}/${questions.length}
                                        </div>
                                    </div>
                                </div>
                                <div class="w-full bg-white/10 rounded-full h-3">
                                    <div class="h-3 bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500 rounded-full transition-all" style="width: ${progress}%"></div>
                                </div>
                                <p class="text-center text-purple-200 text-sm mt-2">${progress.toFixed(0)}% ho√†n th√†nh</p>
                            </div>
                            <div class="space-y-4">
                                ${questionsHTML}
                            </div>
                            <div class="sticky bottom-4 mt-8">
                                <button 
                                    onclick="${isAllAnswered() ? 'calculateResults()' : ''}" 
                                    ${!isAllAnswered() ? 'disabled' : ''}
                                    class="w-full py-5 rounded-2xl text-xl font-bold flex items-center justify-center gap-3 ${isAllAnswered() ? 'bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500 text-white shadow-2xl cursor-pointer hover:scale-105 transition-all' : 'bg-white/10 text-gray-400 cursor-not-allowed'}"
                                >
                                    ${isAllAnswered() ? '‚ú® Xem k·∫øt qu·∫£' : '‚è≥ Vui l√≤ng tr·∫£ l·ªùi t·∫•t c·∫£ c√¢u h·ªèi'}
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            } else if (state.page === 'results') {
                // T√¨m ƒëi·ªÉm cao nh·∫•t ƒë·ªÉ scale bi·ªÉu ƒë·ªì - FIXED
                const maxScore = Math.max(...state.results.chartData.map(item => item.score));
                
                const barsHTML = state.results.chartData.map(item => {
                    // T√≠nh chi·ªÅu cao CH√çNH X√ÅC d·ª±a tr√™n ƒëi·ªÉm s·ªë
                    // Container height = 400px - 40px (padding) - 60px (text) = 300px available
                    const availableHeight = 300;
                    let barHeight;
                    
                    if (maxScore === 0) {
                        barHeight = 0;
                    } else {
                        // C√¥ng th·ª©c: (ƒëi·ªÉm / ƒëi·ªÉm_max) √ó chi·ªÅu cao kh·∫£ d·ª•ng
                        barHeight = (item.score / maxScore) * availableHeight;
                        // ƒê·∫£m b·∫£o c·ªôt c√≥ ƒëi·ªÉm = 0 v·∫´n hi·ªÉn th·ªã m·ªôt ch√∫t
                        if (barHeight < 30 && item.score > 0) {
                            barHeight = 30;
                        }
                    }
                    
                    return `
                    <div class="bar-item">
                        <div class="bar" style="--bar-color: ${item.color}; --bar-color-dark: ${item.colorDark}; height: ${barHeight}px;">
                            ${item.score}
                        </div>
                        <div class="text-center" style="flex-shrink: 0;">
                            <div class="text-white text-sm font-bold">${item.name}</div>
                            <div class="text-purple-200 text-xs">${item.percentage}%</div>
                        </div>
                    </div>
                `;
                }).join('');

                const top3HTML = state.results.top3Categories.map((item, idx) => {
                    const cat = item[0];
                    const score = item[1];
                    const badge = idx === 0 ? 'ü•á' : idx === 1 ? 'ü•à' : 'ü•â';
                    return `
                        <div class="bg-white/5 rounded-xl p-4 border border-white/10">
                            <div class="flex items-center gap-3 mb-2">
                                <span class="text-3xl">${badge}</span>
                                <div>
                                    <div class="text-white font-bold">${categoryInfo[cat].shortName}</div>
                                    <div class="text-purple-200 text-sm">${score}/25 ƒëi·ªÉm (${state.results.percentageScores[cat]}%)</div>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');

                const careerMatchHTML = state.results.careerMatch ? `
                    <div class="bg-gradient-to-r from-yellow-500/20 to-orange-500/20 backdrop-blur-xl rounded-3xl border border-yellow-400/30 p-8 mb-8">
                        <div class="flex items-start gap-4">
                            <div class="text-5xl">üéØ</div>
                            <div class="flex-1">
                                <h4 class="text-2xl font-bold text-white mb-3">ƒê·ªãnh h∆∞·ªõng ngh·ªÅ nghi·ªáp c·ªßa b·∫°n</h4>
                                <div class="bg-white/10 rounded-xl p-4 mb-4">
                                    <div class="text-yellow-300 font-bold text-lg mb-2">M√£ RIASEC: ${state.results.riasecCode}</div>
                                    <div class="text-white text-xl font-bold mb-2">${state.results.careerMatch.title}</div>
                                    <div class="text-purple-100">${state.results.careerMatch.desc}</div>
                                </div>
                                <p class="text-white leading-relaxed">
                                    T·ªï h·ª£p t√≠nh c√°ch <strong class="text-yellow-300">${state.results.riasecCode}</strong> c·ªßa b·∫°n cho th·∫•y b·∫°n ph√π h·ª£p v·ªõi nh√≥m ng√†nh ngh·ªÅ tr√™n. 
                                    H√£y t√¨m hi·ªÉu th√™m v√† r√®n luy·ªán c√°c k·ªπ nƒÉng c·∫ßn thi·∫øt ƒë·ªÉ ph√°t tri·ªÉn trong lƒ©nh v·ª±c n√†y!
                                </p>
                            </div>
                        </div>
                    </div>
                ` : '';

                root.innerHTML = `
                    <div class="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-4 py-8">
                        <div class="max-w-6xl mx-auto">
                            <div class="text-center mb-10">
                                <h2 class="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-400 to-blue-400 mb-2">K·∫øt qu·∫£ c·ªßa b·∫°n</h2>
                                <p class="text-purple-200">Ph√¢n t√≠ch t√≠nh c√°ch v√† ƒë·ªãnh h∆∞·ªõng ngh·ªÅ nghi·ªáp</p>
                            </div>

                            <div class="bg-gradient-to-br from-purple-500/20 via-pink-500/20 to-blue-500/20 backdrop-blur-xl rounded-3xl border border-purple-400/30 p-8 mb-8">
                                <div class="text-center mb-6">
                                    <div class="text-6xl mb-4">${categoryInfo[state.results.topCategory].icon}</div>
                                    <h3 class="text-3xl font-black text-white mb-2">${categoryInfo[state.results.topCategory].name}</h3>
                                    <div class="inline-block bg-white/20 rounded-full px-6 py-2">
                                        <span class="text-2xl font-bold text-white">${state.results.topScore}/25 ƒëi·ªÉm (${state.results.percentageScores[state.results.topCategory]}%)</span>
                                    </div>
                                </div>
                                <p class="text-white text-lg text-center mb-6">${categoryInfo[state.results.topCategory].description}</p>
                                
                                <div class="bg-white/10 rounded-2xl p-6">
                                    <h4 class="text-purple-200 font-semibold text-center mb-4">Top 3 nh√≥m t√≠nh c√°ch c·ªßa b·∫°n:</h4>
                                    <div class="grid md:grid-cols-3 gap-4">
                                        ${top3HTML}
                                    </div>
                                </div>
                            </div>

                            ${careerMatchHTML}

                            <div class="bg-white/10 backdrop-blur-xl rounded-3xl border border-white/20 p-6 mb-8">
                                <h3 class="text-xl font-bold text-white mb-6 text-center">üìä Bi·ªÉu ƒë·ªì ph√¢n t√≠ch chi ti·∫øt</h3>
                                <div class="bar-chart">
                                    ${barsHTML}
                                </div>
                                <div class="mt-6 text-center text-purple-200 text-sm">
                                    ƒêi·ªÉm s·ªë t·ªëi ƒëa m·ªói nh√≥m: 25 ƒëi·ªÉm (5 c√¢u √ó 5 ƒëi·ªÉm)
                                </div>
                            </div>

                            <div class="bg-gradient-to-r from-blue-500/20 to-cyan-500/20 backdrop-blur-xl rounded-3xl border border-blue-400/30 p-8 mb-8">
                                <div class="flex items-start gap-4">
                                    <div class="text-4xl">${categoryInfo[state.results.topCategory].icon}</div>
                                    <div class="flex-1">
                                        <h4 class="text-2xl font-bold text-white mb-4">üìö L·ªùi khuy√™n t·ª´ chuy√™n gia - ${categoryInfo[state.results.topCategory].name}</h4>
                                        
                                        <div class="bg-white/10 rounded-xl p-5 mb-4">
                                            <h5 class="text-blue-300 font-bold text-lg mb-2">T·ªïng quan:</h5>
                                            <p class="text-white leading-relaxed">${categoryInfo[state.results.topCategory].description}</p>
                                        </div>

                                        <div class="bg-white/10 rounded-xl p-5 mb-4">
                                            <h5 class="text-blue-300 font-bold text-lg mb-3">L·ªùi khuy√™n t·ª´ chuy√™n gia:</h5>
                                            <ul class="space-y-2">
                                                ${categoryInfo[state.results.topCategory].advice.map(advice => 
                                                    `<li class="text-white leading-relaxed flex items-start gap-2">
                                                        <span class="text-blue-400 mt-1">‚Ä¢</span>
                                                        <span>${advice}</span>
                                                    </li>`
                                                ).join('')}
                                            </ul>
                                        </div>

                                        <div class="bg-white/10 rounded-xl p-5">
                                            <h5 class="text-blue-300 font-bold text-lg mb-2">Ngh·ªÅ nghi·ªáp ph√π h·ª£p:</h5>
                                            <p class="text-white leading-relaxed">${categoryInfo[state.results.topCategory].careers}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <button onclick="state.page='goals'; render();" class="w-full bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500 hover:from-purple-600 hover:via-pink-600 hover:to-blue-600 text-white font-bold py-5 rounded-2xl text-xl shadow-2xl transition-all hover:scale-105">
                                üéØ L·∫≠p m·ª•c ti√™u ngh·ªÅ nghi·ªáp ‚Üí
                            </button>
                        </div>
                    </div>
                `;
            } else if (state.page === 'goals') {
                const updateButton = () => {
                    const btn = document.getElementById('submitBtn');
                    if (btn) {
                        const valid = isFormValid();
                        btn.disabled = !valid || state.loading;
                        btn.className = 'w-full py-5 rounded-2xl text-xl font-bold flex items-center justify-center gap-3 transition-all ' + 
                            (valid && !state.loading ? 'bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500 text-white shadow-2xl cursor-pointer hover:scale-105' : 'bg-white/10 text-gray-400 cursor-not-allowed');
                        btn.innerHTML = state.loading ? '‚è≥ ƒêang l∆∞u d·ªØ li·ªáu...' : valid ? '‚úÖ Ho√†n th√†nh v√† g·ª≠i' : '‚ö†Ô∏è Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin b·∫Øt bu·ªôc';
                    }
                };

                const personalityTraits = [
                    'S√°ng t·∫°o', 'T·ªâ m·ªâ', 'K·ª∑ lu·∫≠t', 'L√Ω lu·∫≠n', 'T√¨nh c·∫£m', 'Kh√°m ph√°', 
                    'L√£nh ƒë·∫°o', 'H·ª£p t√°c', 'K·ªπ thu·∫≠t', 'H∆∞·ªõng ngo·∫°i', 'Nh·∫´n n·∫°i', 
                    'T√≤ m√≤ h·ªçc h·ªèi', 'NƒÉng ƒë·ªông', 'H·ªó tr·ª£ ng∆∞·ªùi kh√°c', 'Kh√©o tay', 'Th√≠ch c√¥ng ngh·ªá'
                ];

                const whyChooseOptions = [
                    'S·ªü th√≠ch ph√π h·ª£p', 'NƒÉng l·ª±c/ƒëi·ªÉm m·∫°nh ph√π h·ª£p', 'T√≠nh c√°ch ph√π h·ª£p',
                    'Thu nh·∫≠p cao', 'C∆° h·ªôi vi·ªác l√†m', '·∫¢nh h∆∞·ªüng gia ƒë√¨nh', 'Truy·ªÅn th√¥ng/m·∫°ng x√£ h·ªôi'
                ];
                
                root.innerHTML = `
                    <div class="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-4 py-8">
                        <div class="max-w-3xl mx-auto">
                            <div class="text-center mb-10">
                                <h2 class="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-green-400 via-emerald-400 to-teal-400 mb-2">M·ª•c ti√™u ngh·ªÅ nghi·ªáp c·ªßa t√¥i</h2>
                                <p class="text-purple-200">Hi·ªÉu m√¨nh, ch·ªçn ngh·ªÅ</p>
                            </div>

                            <!-- I. Th√¥ng tin c√° nh√¢n -->
                            <div class="bg-white/10 backdrop-blur-xl rounded-3xl border border-white/20 p-8 mb-6">
                                <h3 class="text-2xl font-bold text-white mb-6">üìù I. Th√¥ng tin c√° nh√¢n</h3>
                                <div class="space-y-5">
                                    <div>
                                        <label class="block text-white font-semibold mb-2">üë§ H·ªç v√† t√™n <span class="text-pink-400">*</span></label>
                                        <input id="nameInput" type="text" value="${state.careerGoals.name}" 
                                            class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-purple-300 focus:ring-2 focus:ring-purple-500 focus:outline-none" 
                                            placeholder="Nh·∫≠p h·ªç t√™n c·ªßa b·∫°n" />
                                    </div>
                                    <div class="grid md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-white font-semibold mb-2">üè´ L·ªõp <span class="text-pink-400">*</span></label>
                                            <input id="classInput" type="text" value="${state.careerGoals.class}" 
                                                class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-purple-300 focus:ring-2 focus:ring-purple-500 focus:outline-none" 
                                                placeholder="V√≠ d·ª•: 9A1" />
                                        </div>
                                        <div>
                                            <label class="block text-white font-semibold mb-2">üè¢ Tr∆∞·ªùng <span class="text-pink-400">*</span></label>
                                            <input id="schoolInput" type="text" value="${state.careerGoals.school}" 
                                                class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-purple-300 focus:ring-2 focus:ring-purple-500 focus:outline-none" 
                                                placeholder="T√™n tr∆∞·ªùng" />
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-white font-semibold mb-2">üìÖ Ng√†y th·ª±c hi·ªán b√†i n√†y <span class="text-pink-400">*</span></label>
                                        <input id="testDateInput" type="date" value="${state.careerGoals.testDate}" 
                                            class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white focus:ring-2 focus:ring-purple-500 focus:outline-none" />
                                    </div>
                                </div>
                            </div>

                            <!-- II. K·∫øt qu·∫£ kh√°m ph√° -->
                            <div class="bg-white/10 backdrop-blur-xl rounded-3xl border border-white/20 p-8 mb-6">
                                <h3 class="text-2xl font-bold text-white mb-6">üîç II. K·∫øt qu·∫£ kh√°m ph√° c·ªßa b·∫£n th√¢n</h3>
                                <div class="space-y-5">
                                    <div>
                                        <label class="block text-white font-semibold mb-3">Nh√≥m RIASEC n·ªïi tr·ªôi c·ªßa em <span class="text-pink-400">*</span></label>
                                        <div class="grid grid-cols-3 md:grid-cols-6 gap-3">
                                            ${['R', 'I', 'A', 'S', 'E', 'C'].map(cat => `
                                                <label class="flex items-center gap-2 bg-white/5 p-3 rounded-lg cursor-pointer hover:bg-white/10 transition-all">
                                                    <input type="checkbox" class="riasec-checkbox w-4 h-4 accent-purple-500" value="${cat}" 
                                                        ${state.careerGoals.riasecTop.includes(cat) ? 'checked' : ''} />
                                                    <span class="text-white text-sm font-semibold">${cat}</span>
                                                </label>
                                            `).join('')}
                                        </div>
                                    </div>

                                    <div>
                                        <label class="block text-white font-semibold mb-3">T√≠nh t·ª´ m√¥ t·∫£ b·∫£n th√¢n (t·ªëi ƒëa 5) <span class="text-pink-400">*</span></label>
                                        <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                                            ${personalityTraits.map(trait => `
                                                <label class="flex items-center gap-2 bg-white/5 p-2 rounded-lg cursor-pointer hover:bg-white/10 transition-all text-sm">
                                                    <input type="checkbox" class="personality-checkbox w-4 h-4 accent-purple-500" value="${trait}" 
                                                        ${state.careerGoals.personality.includes(trait) ? 'checked' : ''} />
                                                    <span class="text-white">${trait}</span>
                                                </label>
                                            `).join('')}
                                        </div>
                                    </div>

                                    <div>
                                        <label class="block text-white font-semibold mb-2">üìö Ba m√¥n h·ªçc em th√≠ch nh·∫•t <span class="text-pink-400">*</span></label>
                                        <textarea id="subjectsInput" rows="2" 
                                            class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-purple-300 resize-none focus:ring-2 focus:ring-purple-500 focus:outline-none" 
                                            placeholder="V√≠ d·ª•: To√°n, VƒÉn, Ti·∫øng Anh">${state.careerGoals.favoriteSubjects}</textarea>
                                    </div>

                                    <div>
                                        <label class="block text-white font-semibold mb-2">üéØ Nh·ªØng ho·∫°t ƒë·ªông em th√≠ch l√†m <span class="text-pink-400">*</span></label>
                                        <textarea id="activitiesInput" rows="3" 
                                            class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-purple-300 resize-none focus:ring-2 focus:ring-purple-500 focus:outline-none" 
                                            placeholder="VD: l√†m video, s·ª≠a m√°y m√≥c, n·∫•u ƒÉn, thuy·∫øt tr√¨nh, v·∫Ω tranh, gi·∫£i c√¢u ƒë·ªë, chƒÉm s√≥c ng∆∞·ªùi kh√°c...">${state.careerGoals.activities}</textarea>
                                    </div>
                                </div>
                            </div>

                            <!-- III. Ngh·ªÅ nghi·ªáp quan t√¢m -->
                            <div class="bg-white/10 backdrop-blur-xl rounded-3xl border border-white/20 p-8 mb-6">
                                <h3 class="text-2xl font-bold text-white mb-6">üíº III. Ngh·ªÅ nghi·ªáp quan t√¢m</h3>
                                <div class="space-y-5">
                                    <div>
                                        <label class="block text-white font-semibold mb-2">Ngh·ªÅ ho·∫∑c lƒ©nh v·ª±c em ƒëang quan t√¢m <span class="text-pink-400">*</span></label>
                                        <input id="careerInput" type="text" value="${state.careerGoals.careerInterest}" 
                                            class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-purple-300 focus:ring-2 focus:ring-purple-500 focus:outline-none" 
                                            placeholder="VD: Nh√† thi·∫øt k·∫ø ƒë·ªì h·ªça, Y t√°, L·∫≠p tr√¨nh web, Gi√°o vi√™n m·∫ßm non..." />
                                    </div>

                                    <div>
                                        <label class="block text-white font-semibold mb-3">V√¨ sao b·∫°n ch·ªçn ngh·ªÅ n√†y? (t·ªëi ƒëa 3) <span class="text-pink-400">*</span></label>
                                        <div class="space-y-2">
                                            ${whyChooseOptions.map(option => `
                                                <label class="flex items-center gap-2 bg-white/5 p-3 rounded-lg cursor-pointer hover:bg-white/10 transition-all">
                                                    <input type="checkbox" class="why-checkbox w-4 h-4 accent-purple-500" value="${option}" 
                                                        ${state.careerGoals.whyChoose.includes(option) ? 'checked' : ''} />
                                                    <span class="text-white">${option}</span>
                                                </label>
                                            `).join('')}
                                            <label class="flex items-start gap-2 bg-white/5 p-3 rounded-lg">
                                                <input type="checkbox" class="why-checkbox w-4 h-4 accent-purple-500 mt-1" value="Kh√°c" 
                                                    ${state.careerGoals.whyChoose.includes('Kh√°c') ? 'checked' : ''} />
                                                <div class="flex-1">
                                                    <span class="text-white">Kh√°c:</span>
                                                    <input id="whyOtherInput" type="text" value="${state.careerGoals.whyChooseOther}" 
                                                        class="w-full mt-2 px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-purple-300 focus:ring-2 focus:ring-purple-500 focus:outline-none text-sm" 
                                                        placeholder="M√¥ t·∫£ l√Ω do kh√°c..." />
                                                </div>
                                            </label>
                                        </div>
                                    </div>

                                    <div>
                                        <label class="block text-white font-semibold mb-2">üí™ Nh·ªØng ƒëi·ªÉm m·∫°nh gi√∫p em theo ngh·ªÅ ƒë√≥ <span class="text-pink-400">*</span></label>
                                        <textarea id="strengthsInput" rows="3" 
                                            class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-purple-300 resize-none focus:ring-2 focus:ring-purple-500 focus:outline-none" 
                                            placeholder="M√¥ t·∫£ c√°c ƒëi·ªÉm m·∫°nh c·ªßa b·∫°n...">${state.careerGoals.strengths}</textarea>
                                    </div>

                                    <div>
                                        <label class="block text-white font-semibold mb-2">üìà Nh·ªØng ƒëi·ªÉm em c·∫ßn c·∫£i thi·ªán <span class="text-pink-400">*</span></label>
                                        <textarea id="improvementsInput" rows="3" 
                                            class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-purple-300 resize-none focus:ring-2 focus:ring-purple-500 focus:outline-none" 
                                            placeholder="Nh·ªØng k·ªπ nƒÉng ho·∫∑c ki·∫øn th·ª©c c·∫ßn ph√°t tri·ªÉn...">${state.careerGoals.improvements}</textarea>
                                    </div>
                                </div>
                            </div>

                            <!-- IV. K·∫ø ho·∫°ch t∆∞∆°ng lai -->
                            <div class="bg-white/10 backdrop-blur-xl rounded-3xl border border-white/20 p-8 mb-6">
                                <h3 class="text-2xl font-bold text-white mb-6">üöÄ IV. K·∫ø ho·∫°ch trong t∆∞∆°ng lai</h3>
                                <div class="space-y-5">
                                    <div>
                                        <label class="block text-white font-semibold mb-2">üìÖ Em s·∫Ω b·∫Øt ƒë·∫ßu h√†nh ƒë·ªông ƒë·∫ßu ti√™n v√†o ng√†y <span class="text-pink-400">*</span></label>
                                        <input id="actionDateInput" type="date" value="${state.careerGoals.actionDate}" 
                                            class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white focus:ring-2 focus:ring-purple-500 focus:outline-none" />
                                    </div>

                                    <div>
                                        <label class="block text-white font-semibold mb-2">‚≠ê "N·∫øu 5 nƒÉm n·ªØa nh√¨n l·∫°i, ƒëi·ªÅu g√¨ khi·∫øn em t·ª± h√†o nh·∫•t?" <span class="text-pink-400">*</span></label>
                                        <textarea id="proudInput" rows="4" 
                                            class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-purple-300 resize-none focus:ring-2 focus:ring-purple-500 focus:outline-none" 
                                            placeholder="H√£y t∆∞·ªüng t∆∞·ª£ng v√† vi·∫øt ra ƒëi·ªÅu b·∫°n mong mu·ªën ƒë·∫°t ƒë∆∞·ª£c...">${state.careerGoals.proudMoment}</textarea>
                                    </div>

                                    <div>
                                        <label class="block text-white font-semibold mb-2">üìß Email li√™n h·ªá ph·ª• huynh (kh√¥ng b·∫Øt bu·ªôc)</label>
                                        <input id="emailInput" type="email" value="${state.careerGoals.parentEmail}" 
                                            class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-purple-300 focus:ring-2 focus:ring-purple-500 focus:outline-none" 
                                            placeholder="email@example.com" />
                                    </div>
                                </div>
                            </div>

                            <button id="submitBtn" class="w-full py-5 rounded-2xl text-xl font-bold flex items-center justify-center gap-3 transition-all bg-white/10 text-gray-400 cursor-not-allowed">
                                ‚ö†Ô∏è Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin b·∫Øt bu·ªôc
                            </button>
                        </div>
                    </div>
                `;

                // G·∫Øn event listeners SAU KHI render
                document.getElementById('nameInput').addEventListener('input', (e) => {
                    updateCareerGoal('name', e.target.value);
                    updateButton();
                });
                document.getElementById('classInput').addEventListener('input', (e) => {
                    updateCareerGoal('class', e.target.value);
                    updateButton();
                });
                document.getElementById('schoolInput').addEventListener('input', (e) => {
                    updateCareerGoal('school', e.target.value);
                    updateButton();
                });
                document.getElementById('testDateInput').addEventListener('input', (e) => {
                    updateCareerGoal('testDate', e.target.value);
                    updateButton();
                });

                // RIASEC checkboxes
                document.querySelectorAll('.riasec-checkbox').forEach(checkbox => {
                    checkbox.addEventListener('change', (e) => {
                        if (e.target.checked) {
                            state.careerGoals.riasecTop.push(e.target.value);
                        } else {
                            state.careerGoals.riasecTop = state.careerGoals.riasecTop.filter(v => v !== e.target.value);
                        }
                        updateButton();
                    });
                });

                // Personality checkboxes (max 5)
                document.querySelectorAll('.personality-checkbox').forEach(checkbox => {
                    checkbox.addEventListener('change', (e) => {
                        if (e.target.checked) {
                            if (state.careerGoals.personality.length < 5) {
                                state.careerGoals.personality.push(e.target.value);
                            } else {
                                e.target.checked = false;
                                alert('Ch·ªâ ƒë∆∞·ª£c ch·ªçn t·ªëi ƒëa 5 t√≠nh t·ª´!');
                            }
                        } else {
                            state.careerGoals.personality = state.careerGoals.personality.filter(v => v !== e.target.value);
                        }
                        updateButton();
                    });
                });

                document.getElementById('subjectsInput').addEventListener('input', (e) => {
                    updateCareerGoal('favoriteSubjects', e.target.value);
                    updateButton();
                });
                document.getElementById('activitiesInput').addEventListener('input', (e) => {
                    updateCareerGoal('activities', e.target.value);
                    updateButton();
                });
                document.getElementById('careerInput').addEventListener('input', (e) => {
                    updateCareerGoal('careerInterest', e.target.value);
                    updateButton();
                });

                // Why choose checkboxes (max 3)
                document.querySelectorAll('.why-checkbox').forEach(checkbox => {
                    checkbox.addEventListener('change', (e) => {
                        if (e.target.checked) {
                            if (state.careerGoals.whyChoose.length < 3) {
                                state.careerGoals.whyChoose.push(e.target.value);
                            } else {
                                e.target.checked = false;
                                alert('Ch·ªâ ƒë∆∞·ª£c ch·ªçn t·ªëi ƒëa 3 l√Ω do!');
                            }
                        } else {
                            state.careerGoals.whyChoose = state.careerGoals.whyChoose.filter(v => v !== e.target.value);
                        }
                        updateButton();
                    });
                });

                document.getElementById('whyOtherInput').addEventListener('input', (e) => {
                    updateCareerGoal('whyChooseOther', e.target.value);
                    updateButton();
                });
                document.getElementById('strengthsInput').addEventListener('input', (e) => {
                    updateCareerGoal('strengths', e.target.value);
                    updateButton();
                });
                document.getElementById('improvementsInput').addEventListener('input', (e) => {
                    updateCareerGoal('improvements', e.target.value);
                    updateButton();
                });
                document.getElementById('actionDateInput').addEventListener('input', (e) => {
                    updateCareerGoal('actionDate', e.target.value);
                    updateButton();
                });
                document.getElementById('proudInput').addEventListener('input', (e) => {
                    updateCareerGoal('proudMoment', e.target.value);
                    updateButton();
                });
                document.getElementById('emailInput').addEventListener('input', (e) => {
                    updateCareerGoal('parentEmail', e.target.value);
                    updateButton();
                });
                
                document.getElementById('submitBtn').addEventListener('click', () => {
                    if (isFormValid() && !state.loading) {
                        handleGoalSubmit();
                    }
                });

                updateButton();
            }
        }

        render();
    </script>
</body>
</html>